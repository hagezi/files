server:
    # Modules
    module-config: "validator iterator"

    # Root
    # auto-trust-anchor-file: "/var/lib/unbound/root.key"
    # root-hints: "/var/lib/unbound/root.hints"

    # Logging
    verbosity: 1
    log-queries: no
    log-replies: no
    log-servfail: no
    log-local-actions: no
    log-time-ascii: yes
    logfile: ""

    # Interface
    interface: 0.0.0.0
    port: 5335
    ip-freebind: yes    
    
    # Protocols
    do-ip6: yes
    do-ip4: yes
    do-udp: yes
    do-tcp: yes

    # Process
    do-daemonize: no	

    # Buffers
    edns-buffer-size: 1232
    max-udp-size: 1232
    so-rcvbuf: 4m
    so-sndbuf: 4m

    # Cache/Performance
    cache-max-ttl: 604800
    cache-min-ttl: 300
    fast-server-permil: 900
    incoming-num-tcp: 30
    infra-cache-numhosts: 20000
    infra-cache-slabs: 8
    infra-host-ttl: 7200
    key-cache-slabs: 8
    minimal-responses: yes
    msg-cache-size: 256m
    msg-cache-slabs: 8
    neg-cache-size: 8m
    num-queries-per-thread: 4096
    num-threads: 4
    outgoing-num-tcp: 30
    outgoing-range: 8192
    prefetch-key: yes
    prefetch: yes
    rrset-cache-size: 512m
    rrset-cache-slabs: 8
    serve-expired-client-timeout: 0
    serve-expired-reply-ttl: 30
    serve-expired-ttl-reset: yes
    serve-expired-ttl: 86400
    serve-expired: yes
    so-reuseport: yes
    target-fetch-policy: "3 2 1 1 1"

    # Relaxed DNSSEC - avoid SERVFAIL on DNSSEC validation error
    val-permissive-mode: yes

    # Recursion
    discard-timeout: 5000 # default 1900
    max-sent-count: 48 # default 32

    # Security/Privacy
    aggressive-nsec: yes
    delay-close: 10000
    deny-any: yes
    do-not-query-localhost: no
    harden-algo-downgrade: yes
    harden-below-nxdomain: yes
    harden-dnssec-stripped: yes
    harden-glue: yes
    harden-large-queries: yes
    harden-referral-path: no
    harden-short-bufsize: yes
    hide-http-user-agent: no
    hide-identity: yes
    hide-version: yes
    http-user-agent: "DNS"
    identity: "DNS"
    qname-minimisation: yes
    ratelimit: 0
    rrset-roundrobin: yes
    unwanted-reply-threshold: 10000
    use-caps-for-id: no
    val-clean-additional: yes

    # Local
    private-address: 10.0.0.0/8
    private-address: 169.254.0.0/16
    private-address: 172.16.0.0/12
    private-address: 192.168.0.0/16
    private-address: fd00::/8
    private-address: fe80::/10
    # RFC6303 4.2
    private-address: 192.0.2.0/24
    private-address: 198.51.100.0/24
    private-address: 203.0.113.0/24
    private-address: 255.255.255.255/32
    private-address: 2001:db8::/32
	
    # Access
    access-control: 0.0.0.0/0 allow

    # Insecure - no DNSSEC
    domain-insecure: "in-addr.arpa."
    domain-insecure: "ip6.arpa."
    
remote-control:
    control-enable: yes

auth-zone:
    name: "."
    primary: 170.247.170.2        # b.root-servers.net
    primary: 192.33.4.12          # c.root-servers.net
    primary: 199.7.91.13          # d.root-servers.net
    primary: 192.5.5.241          # f.root-servers.net
    primary: 192.112.36.4         # g.root-servers.net
    primary: 193.0.14.129         # k.root-servers.net
    primary: 192.0.47.132         # xfr.cjr.dns.icann.org
    primary: 192.0.32.132         # xfr.lax.dns.icann.org
    
    primary: 2801:1b8:10::b       # b.root-servers.net
    primary: 2001:500:2::c        # c.root-servers.net
    primary: 2001:500:2d::d       # d.root-servers.net
    primary: 2001:500:2f::f       # f.root-servers.net
    primary: 2001:500:12::d0d     # g.root-servers.net
    primary: 2001:7fd::1          # k.root-servers.net
    primary: 2620:0:2830:202::132 # xfr.cjr.dns.icann.org
    primary: 2620:0:2d0:202::132  # xfr.lax.dns.icann.org

    fallback-enabled: yes
    for-downstream: no
    for-upstream: yes
    
    zonefile: /var/lib/unbound/root.zone
